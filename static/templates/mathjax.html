<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- TODO: https://developer.mozilla.org/en-US/docs/Web/HTTP/Permissions_Policy -->
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0" />
        <title>$pagetitle$</title>
        <link
            href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
            rel="stylesheet" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" />
        <link href="/static/styles/style.css" rel="stylesheet" />
        <script
            data-cdn="highlight.js"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    </head>
    <body>
        <!-- Router -->
        <header>
            <nav class="router">
                <a href="/">
                    <i class="bx bxs-user bx-md"></i>
                    <span class="text">Profile</span>
                </a>
                <a href="/static/views/links.html">
                    <i class="bx bxs-file bx-md"></i>
                    <span class="text">Articles</span>
                </a>
                <a class="theme-moon" data-theme="light">
                    <i class="bx bxs-moon bx-md"></i>
                    <span class="text">Dark</span>
                </a>
            </nav>
        </header>

        <noscript>
            <p>
                Please enable JavaScript to view MathJax and syntax-highlighted
                content properly.
            </p>
        </noscript>

        <!-- Application -->
        <main>$body$</main>

        <!-- marked -->
        <script
            data-cdn="marked"
            src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"
            defer></script>

        <!-- highlight -->
        <script
            data-cdn="highlight.js"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>

        <!-- Enable Inline and Block Level Rendering-->
        <script
            data-cdn="MathJax"
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
            id="MathJax"></script>

        <!-- Enable ASCII Rendering -->
        <script
            data-cdn="MathJax"
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/input/asciimath.js"
            charset="UTF-8"></script>

        <!-- Modules -->
        <script src="/static/modules/main.mjs" type="module"></script>
        <script type="module">
            import {
                Theme,
                responsiveTables,
                setupMarkedOptions,
                setupHighlightJS,
                checkCDNDependencies
            } from '/static/modules/main.mjs';

            const theme = new Theme();

            document.addEventListener('DOMContentLoaded', () => {
                console.log('DOMContentLoaded event triggered');

                theme.init();
                responsiveTables();

                checkCDNDependencies(); // Check CDN dependencies

                if (typeof marked !== 'undefined') {
                    setupMarkedOptions();
                }

                if (typeof hljs !== 'undefined') {
                    setupHighlightJS();
                }
            });
        </script>
    </body>
</html>
